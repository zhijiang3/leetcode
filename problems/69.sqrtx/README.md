# Sqrt(x)

> 题目地址: [https://leetcode-cn.com/problems/sqrtx/](https://leetcode-cn.com/problems/sqrtx/)

## 题目描述

实现 `int sqrt(int x)` 函数。

计算并返回 `x` 的平方根，其中 `x` 是非负整数。

由于返回类型是整数，结果只保留整数的部分，小数部分将被舍去。

示例 1:

```
输入: 4
输出: 2
```

示例 2:

```
输入: 8
输出: 2
说明: 8 的平方根是 2.82842..., 
     由于返回类型是整数，小数部分将被舍去。
```

------

## 题解

### 牛顿迭代法

如果要求 $ S (S \gt 1)$ 的平方根，选取 $ 1 \lt x_0 \lt S $ ，则有公式

$$
x_{n+1} = \frac{1} {2} (x_{n} + \frac{S} {x_{n}})
$$

通过公式的多次迭代，即可得出最接近开方的数，比如求 $ \sqrt{590345} $

首先 $ x_{0} $ 我们可以随便取一个数，只要满足 $ 1 \lt x_{0} \lt S $ 即可 。

我们不难发现，$ 700^2 \lt S \lt 800^2 $ 所以我们这里取 $ 700 $ 作为 $ x_{0} $。

$ x_{0} = 700 $

$ x_{1} = \frac{1} {2} (x_{0} + \frac{S} {x_{0}}) = \frac{1} {2}(700 + \frac{590345} {700}) = 771.675 $

$ x_{2} = \frac{1} {2} (x_{1} + \frac{S} {x_{1}}) = \frac{1} {2}(771.675 + \frac{590345} {771.675}) \approx 768.346 $

$ x_{3} = \frac{1} {2} (x_{2} + \frac{S} {x_{2}}) = \frac{1} {2}(768.346 + \frac{590345} {768.346}) \approx 768.339 $

$ x_{4} = \frac{1} {2} (x_{3} + \frac{S} {x_{3}}) = \frac{1} {2}(768.339 + \frac{590345} {768.339}) \approx 768.339 $

在公式中多次出现 $ 768.339 $，我们验证一下：

$ 768.339 \times 768.339 \approx 590344.819 $

已经无限接近于我们要开方的数 $ 590345 $

这时候我们可以断言 $ \sqrt{590345} \approx 768.339 $

关于牛顿迭代法的具体细节可点击[牛顿法](https://zh.wikipedia.org/wiki/%E7%89%9B%E9%A1%BF%E6%B3%95)

#### 代码实现

```js
function mySqrt(x) {
  let n = 1;

  // 只要计算出来的数 n 的平方
  // 和要开方的数 x 误差在 0.01 以内
  // 那么我们可以断言这个数就是 x 的平方根
  while (Math.abs(n * n - x) > 0.01) {
    n = 1 / 2 * (n + x / n);
  }

  return n | 0;
}
```

#### 复杂度分析

* 时间复杂度：
* 空间复杂度：$ O(1) $.
