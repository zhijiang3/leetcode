# Asteroid Collision

> 题目地址: [https://leetcode-cn.com/problems/asteroid-collision/](https://leetcode-cn.com/problems/asteroid-collision/)

## 题目描述

给定一个整数数组 `asteroids`，表示在同一行的行星。

对于数组中的每一个元素，其绝对值表示行星的大小，正负表示行星的移动方向（正表示向右移动，负表示向左移动）。每一颗行星以相同的速度移动。

找出碰撞后剩下的所有行星。碰撞规则：两个行星相互碰撞，较小的行星会爆炸。如果两颗行星大小相同，则两颗行星都会爆炸。两颗移动方向相同的行星，永远不会发生碰撞。

示例 1:

```
输入: 
asteroids = [5, 10, -5]
输出: [5, 10]
解释: 
10 和 -5 碰撞后只剩下 10。 5 和 10 永远不会发生碰撞。
```

示例 2:

```
输入: 
asteroids = [8, -8]
输出: []
解释: 
8 和 -8 碰撞后，两者都发生爆炸。
```

示例 3:

```
输入: 
asteroids = [10, 2, -5]
输出: [10]
解释: 
2 和 -5 发生碰撞后剩下 -5。10 和 -5 发生碰撞后剩下 10。
```

示例 4:

```
输入: 
asteroids = [-2, -1, 1, 2]
输出: [-2, -1, 1, 2]
解释: 
-2 和 -1 向左移动，而 1 和 2 向右移动。
由于移动方向相同的行星不会发生碰撞，所以最终没有行星发生碰撞。
```

说明:

* 数组 `asteroids` 的长度不超过 `10000`
* 每一颗行星的大小都是非零整数，范围是 `[-1000, 1000]`。

------

## 题解

我们设想有一条**行星运行线路**，当线路上没有行星或只有一个行星时，行星的运行是稳定，即不会发生碰撞。

当我们**往线路的最后新增一个行星**时，可能会发生如下情景：

* 行星向左移动，经过多次碰撞后：
  * 被右移动行星摧毁（行星大小 < 右移动行星）
  * 和某个右移动行星一起摧毁（行星大小 === 右移动行星）
  * 摧毁了所有右移动行星，这之后不管新增的行星是哪个方向的，这颗行星都不会再发生碰撞了（行星大小 > 所有右移动行星）
* 行星向右移动，因为之前的行星路线是稳定的，所以在添加向左移动行星之前，这颗行星暂时不会碰撞

这里的**行星运行路线，我们可以使用栈来处理**，因为左移动行星的碰撞是先碰到最后放入线路的右移动行星，然后是第二后放入线路的右移动行星，以此类推。

### 代码实现

```js
function asteroidCollision(asteroids) {
  const stack = [];

  for (let ans of asteroids) {
    let destroyed = false;
    // 检查碰撞
    while (stack.length !== 0 && stack[stack.length - 1] > 0 && ans < 0) {
      if (stack[stack.length - 1] > -ans) {
        // 左移动行星被右移动行星摧毁
        destroyed = true;
        break;
      } else if (stack[stack.length - 1] < -ans) {
        // 右移动行星被左移动行星摧毁
        stack.pop();
      } else {
        // 两个行星都爆炸了
        destroyed = true;
        stack.pop();
        break;
      }
    }

    // 行星没有被摧毁
    if (!destroyed) stack.push(ans);
  }

  return stack;
}
```

### 复杂度分析

* 时间复杂度：$ O(n) $. $n$ 是行星的数量
* 空间复杂度：$ O(n) $.
