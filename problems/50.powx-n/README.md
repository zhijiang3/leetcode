# Pow(x, n)

> 题目地址: [https://leetcode-cn.com/problems/powx-n/](https://leetcode-cn.com/problems/powx-n/)

## 题目描述

实现 `pow(x, n)` ，即计算 x 的 n 次幂函数。

示例 1:

```
输入: 2.00000, 10
输出: 1024.00000
```

示例 2:

```
输入: 2.10000, 3
输出: 9.26100
```

示例 3:

```
输入: 2.00000, -2
输出: 0.25000
解释: 2-2 = 1/22 = 1/4 = 0.25
```

说明:

* $ -100.0 \lt x \lt 100.0 $
* n 是 32 位有符号整数，其数值范围是 $ [−2^{31}, 2^{31 - 1}] $

------

## 题解

如果 $ n \lt 0 $，我们可以用 $ \frac{1}{x} $，$ -n $ 替代 $ x $，$ n $ 来保证 $ n \ge 0 $ 。

### 快速幂

通过对指数进行二进制分解来实现快速的乘幂，如：$ a^{11} $ 指数 $ 11_{(10)} $ 的二进制为 $ 1011_{(2)} $：

$$
1011_{(2)} = 1 \times 2^3 + 0 \times 2^2 + 1 \times 2^1 + 1 \times 2^0 = 8 + 0 + 2 + 1 = 11_{(10)}
$$

由此可得：

$$
a^{11} = a^{8 + 0 + 2 + 1} = a^{8} \times a^{2} \times a^{1}
$$

#### 代码实现

```js
function myPow(x, n) {
  let ans = 1;

  if (n < 0) {
    x = 1 / x;
    n = -n;
  }

  while (n) {
    if ((n & 1) === 1) ans = ans * x;

    x = x * x;
    n = n >>> 1;
  }

  return ans;
};
```

#### 复杂度分析

* 时间复杂度：$ O(\log n) $. 对于 n 的二进制位表示，至多需要累乘 1 次。
* 空间复杂度：$ O(1) $. 需要用到 2 个变量来保存当前的乘积和最终的结果。
